# Sample repo showing how to use dynamic secrets with MSSQL database

This repo is for learning purposes and to show how Vault can generate dynamic secrets for MSSQL database.

### Requirements:
- Virtualbox
- Vagrant
- 8GB ram for the VMs (2GB is required for the database, Vault and Consul have their own capacity requirements)

### How to :

Fork and clone the repo.

- vagrant up
- ssh to vault server

You can find the token for `VAULT_TOKEN=XXXXXXX vault read database/creds/my-role` command in `apps_token.txt` located in the `/vagrant/ folder

You can use `vault read database/creds/my-role` command multiple times and see how username and password are dynamically generated

Find the container name - `docker ps`

Login to the database - `docker exec -it {CONTAIMER_NAME} "bash"` then `/opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P "YourStrong@Passw0rd"`

`select * from master.sys.server_principals` and then `go` commands lists all users. You should be able to verify that the username generated by Vault exists.
